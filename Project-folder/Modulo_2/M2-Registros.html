<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medtronic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="Css/Registros/EstiloGeneral.css">
    <link rel="stylesheet" href="Css/Registros/Busquedas.css">
    <link rel="stylesheet" href="Css/Registros/Nuevo.css">
    <link rel="stylesheet" href="Css/Registros/Casillas.css">
    <link rel="stylesheet" href="Css/Registros/Registrar.css">
    <link rel="stylesheet" href="Css/Registros/Tabla.css">
    <link rel="stylesheet" href="Css/Registros/Download.css">
    <link rel="stylesheet" href="Css/Registros/Editar.css">
    <link rel="stylesheet" href="Css/Registros/Spinner.css">
    <link rel="stylesheet" href="Css/Registros/Messages.css">
    <link rel="stylesheet" href="Css/Registros/Eliminar.css">
    <link rel="stylesheet" href="Css/Registros/IconoTabla.css">
    <link rel="stylesheet" href="Css/Registros/Paginacion.css">
    <link rel="stylesheet" href="Css/Registros/import.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
</head>
<body>

    <div class="container" id="main-container">
        <h1 id="main-title"> * Base de datos Medtronic <i class="fas fa-check-circle fa-lg"></i></h1>

        <div id="user-name-container" class="user-name" style="display: none;">
            <span id="user-name-span">Cargando...</span>
        </div>
        
        <script type="module">

        </script>
        
        <div class="division" id="division-line"></div>   
        
        <div class="form-busqueda-container" id="search-container">
            <h2 id="search-title">Buscar Datos</h2>
            <div class="form-row-busqueda" id="search-row">
                <div class="form-group-busqueda" id="search-by-company">
                    <label for="buscarEmpresa">Buscar por empresa</label>
                    <input type="text" id="buscarEmpresa" placeholder="Ingrese el nombre de la empresa">
                </div>
                <div class="form-group-busqueda" id="search-by-rut">
                    <label for="buscarRut">Buscar por RUT</label>
                    <input type="text" id="buscarRut" placeholder="Ingrese el RUT de la empresa">
                </div>
            </div>
        </div>

        <div class="form-nuevo-container" id="formNuevoContainer"> 
            <button id="bttnNuevo" class="bttn-nuevo">Nuevo <i class="fas fa-plus-circle"></i></button>
            <span class="bttn-texto" id="new-text">
                <i class="fas fa-arrow-left fa-lg"></i> Presiona "NUEVO" para registrar una nueva empresa.
            </span>
        </div>

        <div class="form-casillas-container hidden" id="formCasillasContainer"> 
            <button id="bttnCasillas" class="bttn-casillas">Eliminar selección <i class="fas fa-trash-alt"></i></button>
            <span class="bttn-texto-casillas" id="delete-selection-text">
                <i class="fas fa-arrow-left fa-lg"></i> Presiona el botón para eliminar la Selección.
            </span>
        </div>
        
        <div class="form-registrar-container hidden" id="formRegistrarContainer">
            <h2 id="register-title">Formulario de registro</h2>
            <div class="form-row-registrar" id="register-row"> 
                <div class="form-group-registrar" id="register-usuario">
                    <label for="registrarUsuario" style="font-size: 12px;">Digitado por:</label>
                    <span id="registrarUsuario" style="font-size: 10px;"></span>
                </div>
                <div class="form-group-registrar" id="register-company">
                    <label for="registrarEmpresas">Empresa</label>
                    <input type="text" id="registrarEmpresas" placeholder="Ingrese el nombre de la empresa" required>
                </div>  
                <div class="form-group-registrar" id="register-rut">
                    <label for="registrarRut">RUT</label>
                    <input type="text" id="registrarRut" placeholder="Ingrese el RUT de la empresa" required>
                </div>                 
                <script>
                    const inputUsuario = document.getElementById('registrarUsuario');
                    inputUsuario.setAttribute('readonly', true);
                </script>
                <div class="form-group-registrar" id="register-buttons">
                    <div class="bttn-container-registrar" id="register-button-container">
                        <button type="submit" class="btn-guardar-registrar" id="btnGuardar"><i class="fas fa-save"></i> Guardar</button>
                        <button type="reset" class="btn-cancelar-registrar" id="btnCancelar"><i class="fas fa-times"></i> Cancelar</button>
                    </div>
                </div>
            </div>  
        </div>

        <div class="table-container" id="tableContainer">
            <table id="BaseDatos">
                <thead id="tableHeader">
                    <tr>
                        <th id="headerSeleccion"></th>
                        <th id="headerFecha">Fecha Creación <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerFecha">Usuario <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerId">Id <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerEmpresa">Admisión <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Nombre paciente <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Médico <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Fecha de cirugía <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Proveedor <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Código <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Descripción <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Cantidad <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Precio <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Atributo <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Estado <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Fecha de cargo <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Cargó <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Tipo <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Orden de compra <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Guía <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Factura <i class="fas fa-sort-alpha-down"></i></th>
                        <th id="headerRut">Total ítem <i class="fas fa-sort-alpha-down"></i></th>
                    </tr>
                </thead>                
                <tbody id="table-body"></tbody>
            </table>
        </div>

        <div id="pagination"></div>

        <div class="download-container" id="downloadContainer"> 
            <button id="bttnDownload" class="bttn-download">Descargar Excel <i class="fas fa-download"></i></button>
            <button id="bttnImport" class="bttn-import">Importar Excel <i class="fas fa-upload"></i></button>
        </div>

        <div class="import-container hidden" id="importContainer">
            <div class="import-content">
                <div class="form-group-import" id="import-usuario">
                    <label for="importUsuario" style="font-size: 12px;">Importado por:</label>
                    <span id="importUsuario" style="font-size: 10px;">Nombre del usuario</span>
                    <button class="close-btn-import" id="close-import-container">×</button>
                </div>
                <div class="form-group-import">
                    <label for="fileInput">Subir archivo:</label>
                    <input type="file" id="fileInput" class="file-input">
                    <span>Selecciona un archivo .xlsx o .csv</span>
                </div>
                <button class="btn-import" id="btnImportar">Importar</button>
                <button class="btn-cancelar-import" id="btnCancelar">Cancelar</button>
        
                <div class="overlay hidden" id="spinnerOverlay">
                    <div class="spinner-container" id="spinnerContainer">
                        <div class="loading-text" id="loadingText">Importando... </div>
                        <div class="lds-dual-ring" id="spinner"></div>
                    </div>
                </div>
            </div>
        </div>       
        
        <div class="editContainer hidden" id="edit-container-nombreEmpresa">
            <button class="close-btn-edit" id="close-edit-nombreEmpresa">×</button>
            <div class="edit-form" id="edit-form-nombre">
                <h3><i class="fas fa-edit"></i> Actualiza el nombre de la empresa:</h3>
                <input type="text" id="edit-empresa" placeholder="Ingrese el nuevo nombre de la empresa" required />
                <button id="btnGuardarNombre"><i class="fas fa-save"></i> Guardar</button>
                <button id="btnCancelarNombre"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>  

        <div class="editContainer hidden" id="edit-container-RutEmpresa">
            <button class="close-btn-edit" id="close-edit-RutEmpresa">×</button>
            <div class="edit-form" id="edit-form-rut">
                <h3><i class="fas fa-edit"></i> Actualiza el RUT de la empresa:</h3>
                <input type="text" id="edit-rut" placeholder="Ingrese el nuevo RUT de la empresa" required />
                <button id="btnGuardarRut"><i class="fas fa-save"></i> Guardar</button>
                <button id="btnCancelarRut"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>  

        <div class="overlay hidden" id="overlay">
            <div class="spinner-container" id="spinnerContainer">
              <div class="loading-text" id="loadingText">Loading... </div>
              <div class="lds-dual-ring" id="spinner"></div>
            </div>
        </div>

        <div class="messages-container" id="messagesContainer">
            <div class="message success hidden" id="messageSuccess">
              <i class="fas fa-check-circle"></i>
              <div class="text" id="successText"></div>
              <button class="close-btn" id="closeMessageSuccess">&times;</button>
            </div>
            <div class="message warning hidden" id="messageWarning">
              <i class="fas fa-exclamation-circle"></i>
              <div class="text" id="warningText">Advertencia:</div>
              <button class="close-btn" id="closeMessageWarning">&times;</button>
            </div>
            <div class="message error hidden" id="messageError">
              <i class="fas fa-times-circle"></i>
              <div class="text" id="errorText">Error: </div>
              <button class="close-btn" id="closeMessageError">&times;</button>
            </div>
            <div class="message info hidden" id="messageInfo">
              <i class="fas fa-info-circle"></i>
              <div class="text" id="infoText">Información: </div>
              <button class="close-btn" id="closeMessageInfo">&times;</button>
            </div>
        </div>

        <div class="delete-container hidden" id="deleteContainer">
            <div class="delete-form" id="deleteForm">
                <h3 id="deleteTitle">¿Estás seguro de que deseas eliminar esta selección?</h3>
                <div class="delete-buttons" id="deleteButtons">
                    <button id="btnConfirmarEliminar"><i class="fas fa-trash-alt"></i> Eliminar</button>
                    <button id="btnCancelarEliminar"><i class="fas fa-times"></i> Cancelar</button>
                </div>
            </div>
        </div>

    </div>


    <script src="Script/Registros/toggleForm.js"></script>



</body>
</html>
